# 咖啡销售系统

## （一）设计文档

### 一，需求说明

#### 1、项目概述

本系统是一个面向咖啡店管理员的销售管理系统，旨在实现对咖啡商品、订单、客户信息及库存的高效管理。系统通过图形化界面配合数据库后台操作，为管理员提供便捷的管理工具。

#### 2、系统用户

- 管理员（唯一角色，拥有系统全部操作权限）

#### 3、功能需求

##### 1. 登录功能

- 管理员通过用户名和密码登录系统。
- 登录信息验证成功后进入主界面，失败提示错误信息。

##### 2. 咖啡商品管理

- 添加咖啡商品信息（名称、种类、单价、库存、描述等）。
- 修改咖啡商品信息。
- 删除咖啡商品信息。
- 查询与浏览咖啡商品列表，支持按种类、关键字搜索。

##### 3. 订单管理

- 创建新订单（录入客户信息，选择商品、数量，自动计算总价）。
- 修改订单信息（如未支付状态下修改商品数量）。
- 删除订单（仅限未支付或取消状态的订单）。
- 查询订单列表，支持按日期、客户名、订单状态筛选。

##### 4. 客户信息管理

- 添加客户基本信息（姓名、联系方式、备注等）。
- 修改客户信息。
- 删除客户信息。
- 查询客户列表。

##### 5. 库存管理

- 显示所有商品的库存数量。
- 支持库存预警提示（如库存低于指定阈值）。
- 手动调整库存（进货或报损时使用）。

##### 6. 销售统计

- 查看每日、每周、每月销售额统计图表。
- 按商品类别、销售数量、客户维度生成报表。

##### 7. 系统管理

- 修改管理员密码。
- 备份与恢复数据库（选做功能，可不实现）。

#### 4、非功能性需求

- **数据一致性**：所有增删改查操作必须保证数据库事务一致性。
- **系统安全性**：登录使用密码加密验证。
- **操作简洁**：界面设计简洁直观，操作逻辑清晰。
- **性能要求**：小型数据集下操作响应时间<2秒。

### 二，ERD

![ERD1](C:\Users\24025\Desktop\myfile\Coffee-Sales-System\img\ERD1.png)

### 三，3NF证明

#### 1、以数据表为单位规范化

------

##### 1. Admin 表

```
Admin(admin_id, username, password)
```

- 主键：admin_id
- 所有字段原子 ✅（满足1NF）
- username、password 完全依赖 admin_id ✅（2NF）
- 无传递依赖 ✅（3NF）
- admin_id 是候选键 ✅（BCNF）

✅ 已满足 **BCNF**

------

##### 2. Product 表

```
Product(product_id, name, category, price, stock, description)
```

- 主键：product_id
- 所有字段都是原子值 ✅（1NF）
- 所有非主属性完全依赖 product_id ✅（2NF）
- 无传递依赖 ✅（3NF）
- product_id 是唯一候选键 ✅（BCNF）

✅ 已满足 **BCNF**

------

##### 3. Customer 表

```
Customer(customer_id, name, phone, email, note)
```

- 主键：customer_id
- 原子性字段 ✅（1NF）
- 所有非主属性都完全依赖 customer_id ✅（2NF）
- 无传递依赖 ✅（3NF）
- customer_id 是唯一候选键 ✅（BCNF）

✅ 已满足 **BCNF**

------

##### 4. Order 表

```
Order(order_id, customer_id, order_date, total_price, status)
```

- 主键：order_id
- 原子性字段 ✅（1NF）
- 所有非主属性（customer_id, order_date, total_price, status）完全依赖于 order_id ✅（2NF）
- 无传递依赖 ✅（3NF）
- 只有 order_id → 其他属性，order_id 是候选键 ✅（BCNF）

✅ 已满足 **BCNF**

------

##### 5. OrderDetail 表

```
OrderDetail(order_detail_id, order_id, product_id, quantity, subtotal)
```

> **候选主键可为：order_detail_id 或 (order_id, product_id)**
>  若使用 surrogate key（order_detail_id），则只需验证对该主键的依赖。

- 原子性字段 ✅（1NF）
- 所有非主属性完全依赖 order_detail_id ✅（2NF）
- 无传递依赖 ✅（3NF）
- 主键唯一 ✅（BCNF）

✅ 若使用 `order_detail_id`，则满足 **BCNF**。

如果使用组合主键 `(order_id, product_id)`，则仍需验证：

- quantity 和 subtotal 完全依赖组合主键 ✅（2NF）
- 无 subtotal = quantity × product.price 的传递依赖，因为 price 来自另一表 ✅（3NF）
- 两个字段都为候选键部分 ✅（BCNF）

------

#### 2、结论

该数据库设计经过逐表分析，**所有表都满足第三范式（3NF）甚至 Boyce-Codd 范式（BCNF）**，没有冗余或非规范依赖，设计合理、结构清晰。

### 四，功能说明

##### 1. 登录功能

- 管理员通过用户名和密码登录系统。
- 登录信息验证成功后进入主界面，失败提示错误信息。

##### 2. 咖啡商品管理

- 添加咖啡商品信息（名称、种类、单价、库存、描述等）。
- 修改咖啡商品信息。
- 删除咖啡商品信息。
- 查询与浏览咖啡商品列表，支持按种类、关键字搜索。

##### 3. 订单管理

- 创建新订单（录入客户信息，选择商品、数量，自动计算总价）。
- 修改订单信息（如未支付状态下修改商品数量）。
- 删除订单（仅限未支付或取消状态的订单）。
- 查询订单列表，支持按日期、客户名、订单状态筛选。

##### 4. 客户信息管理

- 添加客户基本信息（姓名、联系方式、备注等）。
- 修改客户信息。
- 删除客户信息。
- 查询客户列表。

##### 5. 库存管理

- 显示所有商品的库存数量。
- 支持库存预警提示（如库存低于指定阈值）。
- 手动调整库存（进货或报损时使用）。

##### 6. 销售统计

- 查看每日、每周、每月销售额统计图表。
- 按商品类别、销售数量、客户维度生成报表。

##### 7. 系统管理

- 修改管理员密码。
- 备份与恢复数据库（选做功能，可不实现）。

## （二）使用说明

## （三）源代码

## （四）可执行文件

## （五）数据库SQL脚本

## （六）数据库备份文件